AWSTemplateFormatVersion: 2010-09-09
Description: DynamoDB tables to use as the datastore

Resources:
  ListsTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: !Sub "${AWS::StackName}-lists"
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: "Id"
          AttributeType: "S"
      KeySchema:
        - AttributeName: "Id"
          KeyType: "HASH"

  ItemsTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: !Sub "${AWS::StackName}-items"
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: "ListId"
          AttributeType: "S"
        - AttributeName: "Id"
          AttributeType: "S"
      KeySchema:
        - AttributeName: "ListId"
          KeyType: "HASH"
        - AttributeName: "Id"
          KeyType: "RANGE"

Outputs:
  ListsTableArn:
    Value: !GetAtt ListsTable.Arn
    Export:
      Name: !Sub "${AWS::StackName}:ListsTableArn"
  ItemsTableArn:
    Value: !GetAtt ItemsTable.Arn
    Export:
      Name: !Sub "${AWS::StackName}:ItemsTableArn"
